# 寻找一个可理解的共识算法（扩展版本）

著作信息:

- Diego Ongaro and John Ousterhout
- Stanford University

# 摘要

Raft是管理复制日志的一致算法。它产生一个等价于(mutli-)Paxos的结果，它与Paxos一样有效，但它的结构与Paxos不同；这使得Raft比Paxos更容易理解，也为构建实际系统提供了更好的基础。为了增强可理解性，Raft分离了共识的关键元素，例如领导者选举、日志复制和安全性，并且它强制实施了更强的一致性，以减少必须考虑的状态的数量。一项用户研究的结果表明，Raft比Paxos更容易让学生学习。Raft还包括一个改变集群成员的新机制，它使用重叠多数来保证安全。

# 1. 简介

共识算法允许一组机器作为一个连贯的群体工作，能够经受住一些成员的失败。正因为如此，它们在构建可靠的大规模软件系统中起着关键作用。在过去十年中，Paxos主导了关于共识算法的讨论: 大多数共识的实现都基于Paxos或受其影响，并且Paxos已成为用于向学生教授共识的主要工具。

不幸的是，Paxos很难理解，尽管有无数次尝试让它变得更容易理解。此外，它的体系结构需要复杂的变化来支持实际的系统。因此，系统构建者和学生都在为Paxos而奋斗。

在与Paxos斗争之后，我们开始寻找一种新的共识算法，这种算法可以为系统构建和教育提供更好的基础。我们的方法是不寻常的，因为我们的主要目标是可理解性: 我们能为实际系统定义一个一致的算法，并以一种比Paxos更容易学习的方式来描述它吗? 此外，我们希望算法能够促进直觉的发展，这对于系统构建者来说是必不可少的。重要的不仅仅是算法的工作，还有它为什么会工作。

这项工作的结果是一个共识算法称为Raft。在设计Raft时，我们应用了特殊的技术来提高可理解性，包括分解(Raft将领导者选举、日志复制和安全性分开)和状态空间缩减(相对于Paxos，Raft减少了不确定性的程度和服务器之间不一致的方式)。一项针对两所大学43名学生的用户研究表明，Raft明显比Paxos更容易理解:在学习了这两种算法后，其中33名学生能够更好地回答关于Raft的问题。